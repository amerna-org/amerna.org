---
import Step1 from "@/icons/step1.astro";
import Step2 from "@/icons/step2.astro";
import Step3 from "@/icons/step3.astro";
import Arrow from "@/icons/arrow.astro";
import Ornament from "@/components/Ornament.astro";
import i18next, { t } from "i18next";

const rtl = i18next.language === "ar";
---

<section id="how" class="container">
  <h2>{t("how.title")}</h2>
  <ul class="steps">
    <li id="step-1" class="card with-icon">
      <Step1 />
      <h3>{t("how.step1.title")}</h3>
      <Arrow rtl={rtl} />
      <Ornament
        x={rtl ? 100 : 0}
        y={0}
        size={6}
        gap=".5rem"
        cols={5}
        count={35}
      />
    </li>
    <li id="step-2" class="card with-icon">
      <Step2 />
      <h3>{t("how.step2.title")}</h3>
      <Arrow rtl={rtl} />
      <Ornament
        x={rtl ? 0 : 100}
        y={100}
        size={6}
        gap=".5rem"
        cols={5}
        count={35}
      />
    </li>
    <li id="step-3" class="card with-icon">
      <Step3 />
      <h3>{t("how.step3.title")}</h3>
      <Ornament
        x={rtl ? 100 : 0}
        y={100}
        size={6}
        gap=".5rem"
        cols={5}
        count={35}
      />
    </li>
  </ul>
</section>

<style>
  .steps {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  @media only screen and (min-width: 650px) {
    .steps {
      gap: 3rem;
    }

    .steps li {
      max-width: 42.5%;
    }

    .steps li:nth-child(even) {
      margin-inline-start: auto;
    }
  }
</style>

<style is:global>
  .steps li > .arrow {
    display: none;
  }

  .steps li:first-of-type:hover > .ornament {
    gap: 0.3rem;
    top: 5%;
    left: 95%;
  }
  .steps li:nth-of-type(2):hover > .ornament {
    gap: 0.3rem;
    top: 95%;
    left: 5%;
  }
  .steps li:last-of-type:hover > .ornament {
    gap: 0.3rem;
    top: 95%;
    left: 95%;
  }

  @media only screen and (min-width: 649px) {
    .steps li > .arrow {
      display: unset;
      position: absolute;
      height: auto;
      top: calc(50% + 2rem);
    }

    .steps li > .arrow path {
      fill: rgb(var(--text));
    }

    .steps li:nth-child(odd) > .arrow {
      right: -2rem;
      left: unset;
      transform: translate(100%, -2rem) rotateY(180deg);
    }

    .steps li:nth-child(odd) > .arrow.rtl {
      left: -2rem;
      right: unset;
      transform: translate(-100%, -2rem) rotateY(0deg);
    }

    .steps li:nth-child(even) > .arrow {
      left: -2rem;
      right: unset;
      transform: translate(-100%, -2rem) rotateY(0deg);
    }

    .steps li:nth-child(even) > .arrow.rtl {
      right: -2rem;
      left: unset;
      transform: translate(100%, -2rem) rotateY(180deg);
    }
  }
</style>
