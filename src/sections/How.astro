---
import Step1 from "@/icons/step1.astro";
import Step2 from "@/icons/step2.astro";
import Step3 from "@/icons/step3.astro";
import Arrow from "@/icons/arrow.astro";
import Ornament from "@/components/Ornament.astro";
---

<section id="how">
  <h2>كيف يعمل أمرنا</h2>
  <ul class="steps">
    <li class="card step">
      <Step1 />
      <span>قدم لنا فكرتك</span>
      <Arrow />
      <Ornament x={100} y={0} size={8} gap=".5rem" cols={5} count={35} />
    </li>
    <li class="card step">
      <Step2 />
      <span>نبني مشروعك</span>
      <Arrow />
      <Ornament x={0} y={100} size={8} gap=".5rem" cols={5} count={35} />
    </li>
    <li class="card step">
      <Step3 />
      <span>استلم مشروعك</span>
      <Ornament x={100} y={100} size={8} gap=".5rem" cols={5} count={35} />
    </li>
  </ul>
</section>

<style>
  .steps {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .step {
    padding: 2rem 1rem;
    text-align: center;
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    position: relative;
    overflow: visible;
  }

  @media only screen and (min-width: 650px) {
    .steps {
      gap: 3rem;
    }

    .step {
      max-width: 42.5%;
    }

    .step:nth-child(even) {
      margin-inline-start: auto;
    }
  }

  .step > span {
    font-size: var(--fz-md);
  }
</style>

<style is:global>
  .step > .icon {
    width: 100%;
    max-width: 10rem;
    height: auto;
  }

  .step > .arrow {
    display: none;
  }

  @media only screen and (min-width: 649px) {
    .step > .arrow {
      display: unset;
      position: absolute;
      height: auto;
      top: calc(50% + 2rem);
    }

    .step > .arrow path {
      fill: rgb(var(--text));
    }

    .step:nth-child(odd) > .arrow {
      left: -2rem;
      transform: translate(-100%, -2rem);
    }

    .step:nth-child(even) > .arrow {
      right: -2rem;
      transform: translate(100%, -2rem) rotateY(180deg);
    }
  }
</style>
